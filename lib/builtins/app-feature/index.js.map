{"version":3,"sources":["../../../src/builtins/app-feature/index.js"],"names":["path","require","fs","localConfig","steps","packageConfig","getTemplatePath","module","exports","app","options","targetPath","join","workingPath","appDir","ensureDirSync","ensureSafeToCreateProject_","templatePath","appMode","copyFilesFromTemplate_","createOptionalFiles_","updatePackageJson_","config","setPublishMode","npmInstall_"],"mappings":";;;;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAASD,OAAO,CAAC,WAAD,CAAtB;;AACA,MAAME,WAAW,GAAGF,OAAO,CAAC,UAAD,CAA3B;;AACA,MAAM;AAAEG,EAAAA,KAAF;AAASC,EAAAA;AAAT,IAA2BJ,OAAO,CAAC,OAAD,CAAxC;;AACA,MAAMK,eAAe,GAAGL,OAAO,CAAC,6BAAD,CAA/B;;AAEAM,MAAM,CAACC,OAAP,GAAiB,OAAOC,GAAP,EAAYC,OAAZ,KAAwB;AACrCA,EAAAA,OAAO,GAAG,EACN,GAAGP,WADG;AAEN,OAAGO;AAFG,GAAV;AAKA,QAAMC,UAAU,GAAGX,IAAI,CAACY,IAAL,CAAUF,OAAO,CAACG,WAAlB,EAA+BH,OAAO,CAACI,MAAvC,CAAnB;AACAZ,EAAAA,EAAE,CAACa,aAAH,CAAiBJ,UAAjB;AAEAP,EAAAA,KAAK,CAACY,0BAAN,CAAiCP,GAAjC,EAAsCE,UAAtC,EAAkD,CAAC,cAAD,CAAlD;AAEA,QAAMM,YAAY,GAAGX,eAAe,CAACI,OAAO,CAACQ,OAAT,CAApC;AAEA,QAAMd,KAAK,CAACe,sBAAN,CAA6BV,GAA7B,EAAkCQ,YAAlC,EAAgDN,UAAhD,EAA4DD,OAA5D,CAAN;AAEA,QAAMN,KAAK,CAACgB,oBAAN,CAA2BX,GAA3B,EAAgCE,UAAhC,EAA4CD,OAA5C,CAAN;AAEA,QAAMN,KAAK,CAACiB,kBAAN,CAAyBZ,GAAzB,EAA8BE,UAA9B,EAA2CW,MAAD,IAAYjB,aAAa,CAACkB,cAAd,CAA6BD,MAA7B,EAAqCZ,OAArC,CAAtD,CAAN;AAEA,QAAMN,KAAK,CAACoB,WAAN,CAAkBf,GAAlB,EAAuBE,UAAvB,EAAmCD,OAAnC,CAAN;AACH,CApBD","sourcesContent":["const path = require(\"path\");\nconst { fs } = require(\"@genx/sys\");\nconst localConfig = require(\"./config\");\nconst { steps, packageConfig } = require(\"../..\");\nconst getTemplatePath = require(\"../../utils/getTemplatePath\");\n\nmodule.exports = async (app, options) => {\n    options = {\n        ...localConfig,\n        ...options,\n    };\n\n    const targetPath = path.join(options.workingPath, options.appDir);\n    fs.ensureDirSync(targetPath);\n\n    steps.ensureSafeToCreateProject_(app, targetPath, [\"package.json\"]);\n\n    const templatePath = getTemplatePath(options.appMode);\n\n    await steps.copyFilesFromTemplate_(app, templatePath, targetPath, options);\n\n    await steps.createOptionalFiles_(app, targetPath, options);\n\n    await steps.updatePackageJson_(app, targetPath, (config) => packageConfig.setPublishMode(config, options));\n\n    await steps.npmInstall_(app, targetPath, options);\n};\n"],"file":"index.js"}