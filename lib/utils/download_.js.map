{"version":3,"sources":["../../src/utils/download_.js"],"names":["request","require","module","exports","app","url","saveToPath","dirName","path","dirname","fs","ensureDir","stream","createWriteStream","Promise","resolve","reject","on","log","err","get","pipe"],"mappings":";;;;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,YAAD,CAAvB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,UAAjB,KAAgC;AAC7C,QAAMC,OAAO,GAAGC,IAAI,CAACC,OAAL,CAAaH,UAAb,CAAhB;AACA,QAAMI,EAAE,CAACC,SAAH,CAAaJ,OAAb,CAAN;AAEA,QAAMK,MAAM,GAAGF,EAAE,CAACG,iBAAH,CAAqBP,UAArB,CAAf;AAEA,SAAO,IAAIQ,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCJ,IAAAA,MAAM,CAACK,EAAP,CAAU,OAAV,EAAmB,MAAM;AACrBF,MAAAA,OAAO;AACPX,MAAAA,GAAG,CAACc,GAAJ,CAAQ,MAAR,EAAiB,cAAab,GAAI,EAAlC;AACH,KAHD;AAKAO,IAAAA,MAAM,CAACK,EAAP,CAAU,OAAV,EAAoBE,GAAD,IAAS;AACxBH,MAAAA,MAAM,CAACG,GAAD,CAAN;AACH,KAFD;AAIAnB,IAAAA,OAAO,CAACoB,GAAR,CAAYf,GAAZ,EAAiBgB,IAAjB,CAAsBT,MAAtB;AACH,GAXM,CAAP;AAYH,CAlBD","sourcesContent":["const request = require('superagent');\n\nmodule.exports = async (app, url, saveToPath) => {\n    const dirName = path.dirname(saveToPath);\n    await fs.ensureDir(dirName);\n\n    const stream = fs.createWriteStream(saveToPath);\n\n    return new Promise((resolve, reject) => {\n        stream.on('close', () => {\n            resolve();\n            app.log('info', `Downloaded ${url}`);\n        });\n\n        stream.on('error', (err) => {\n            reject(err);\n        });\n\n        request.get(url).pipe(stream);\n    });\n};"],"file":"download_.js"}