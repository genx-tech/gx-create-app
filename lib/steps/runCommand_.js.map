{"version":3,"sources":["../../src/steps/runCommand_.js"],"names":["cmd","require","module","exports","app","workingPath","command","treatErrorAsInfo","lastWd","process","cwd","cwdChanged","chdir","log","program","args","split","runLive_","data","toString"],"mappings":";;;;AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAUC,OAAO,CAAC,WAAD,CAAvB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,OAAOC,GAAP,EAAYC,WAAZ,EAAyBC,OAAzB,EAAkCC,gBAAlC,KAAuD;AACpE,QAAMC,MAAM,GAAGC,OAAO,CAACC,GAAR,EAAf;AACA,MAAIC,UAAU,GAAG,KAAjB;;AAEA,MAAIN,WAAW,KAAKG,MAApB,EAA4B;AACxBC,IAAAA,OAAO,CAACG,KAAR,CAAcP,WAAd;AACAM,IAAAA,UAAU,GAAG,IAAb;AACH;;AAEDP,EAAAA,GAAG,CAACS,GAAJ,CAAQ,MAAR,EAAgBP,OAAhB;;AAEA,MAAI;AACA,UAAM,CAAEQ,OAAF,EAAW,GAAGC,IAAd,IAAuBT,OAAO,CAACU,KAAR,CAAc,GAAd,CAA7B;AAEA,UAAMhB,GAAG,CAACiB,QAAJ,CAAaH,OAAb,EAAsBC,IAAtB,EAA4BG,IAAI,IAAI;AACtCd,MAAAA,GAAG,CAACS,GAAJ,CAAQ,MAAR,EAAgBK,IAAI,CAACC,QAAL,EAAhB;AACH,KAFK,EAEHD,IAAI,IAAI;AACP,UAAIX,gBAAJ,EAAsB;AAClBH,QAAAA,GAAG,CAACS,GAAJ,CAAQ,MAAR,EAAgBK,IAAI,CAACC,QAAL,EAAhB;AACH,OAFD,MAEO;AACHf,QAAAA,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBK,IAAI,CAACC,QAAL,EAAjB;AACH;AACJ,KARK,CAAN;AASH,GAZD,SAYU;AACN,QAAIR,UAAJ,EAAgB;AACZF,MAAAA,OAAO,CAACG,KAAR,CAAcJ,MAAd;AACH;AACJ;AACJ,CA5BD","sourcesContent":["const { cmd } = require(\"@genx/sys\");\n\nmodule.exports = async (app, workingPath, command, treatErrorAsInfo) => {\n    const lastWd = process.cwd();\n    let cwdChanged = false;\n\n    if (workingPath !== lastWd) {\n        process.chdir(workingPath);\n        cwdChanged = true;\n    }   \n\n    app.log('info', command);       \n\n    try {\n        const [ program, ...args ] = command.split(' ');\n\n        await cmd.runLive_(program, args, data => {\n            app.log('info', data.toString());\n        }, data => {\n            if (treatErrorAsInfo) {\n                app.log('info', data.toString());\n            } else {\n                app.log('error', data.toString());\n            }            \n        });\n    } finally {\n        if (cwdChanged) {\n            process.chdir(lastWd);    \n        }        \n    }       \n}"],"file":"runCommand_.js"}